#ifndef __H_SSD1306__
#define __H_SSD1306__

#define OLED_I2C_BUS    "/dev/i2c-1"
#define OLED_I2C_ADDR   (0x3c)

typedef struct {

  int32_t handle;

  int16_t width;
  int16_t height;

} OLED_SSD1306;

int32_t oled_ssd1306_open(OLED_SSD1306* ssd1306);
void oled_ssd1306_close(OLED_SSD1306* ssd1306);
void oled_ssd1306_print(OLED_SSD1306* ssd1306, int16_t pos_x, int16_t pos_y, uint8_t* mes);
void oled_ssd1306_show_meter(OLED_SSD1306* ssd1306, int16_t pos_x, int16_t pos_y, int16_t current_level, int16_t peak_level);

// 6x8 font bitmap 0x20 - 0x7e
static uint8_t font6x8_data[] = {
    0x00,0x00,0x00,0x00,0x00,0x00,
    0x00,0x00,0x5f,0x00,0x00,0x00,
    0x04,0x03,0x04,0x03,0x00,0x00,
    0x12,0x7f,0x12,0x7f,0x12,0x00,
    0x24,0x2a,0x7f,0x2a,0x12,0x00,
    0x23,0x13,0x08,0x64,0x62,0x00,
    0x30,0x4e,0x59,0x26,0x50,0x00,
    0x04,0x03,0x00,0x00,0x00,0x00,
    0x00,0x00,0x1c,0x22,0x41,0x00,
    0x41,0x22,0x1c,0x00,0x00,0x00,
    0x14,0x08,0x3e,0x08,0x14,0x00,
    0x08,0x08,0x3e,0x08,0x08,0x00,
    0x00,0x50,0x30,0x00,0x00,0x00,
    0x08,0x08,0x08,0x08,0x08,0x00,
    0x60,0x60,0x00,0x00,0x00,0x00,
    0x40,0x20,0x10,0x08,0x04,0x00,
    0x3e,0x51,0x49,0x45,0x3e,0x00,
    0x00,0x42,0x7f,0x40,0x00,0x00,
    0x62,0x51,0x49,0x49,0x46,0x00,
    0x22,0x41,0x49,0x49,0x36,0x00,
    0x18,0x14,0x12,0x7f,0x10,0x00,
    0x2f,0x45,0x45,0x45,0x39,0x00,
    0x3e,0x49,0x49,0x49,0x32,0x00,
    0x01,0x61,0x19,0x05,0x03,0x00,
    0x36,0x49,0x49,0x49,0x36,0x00,
    0x26,0x49,0x49,0x49,0x3e,0x00,
    0x00,0x36,0x36,0x00,0x00,0x00,
    0x00,0x56,0x36,0x00,0x00,0x00,
    0x00,0x08,0x14,0x22,0x41,0x00,
    0x14,0x14,0x14,0x14,0x14,0x00,
    0x41,0x22,0x14,0x08,0x00,0x00,
    0x02,0x01,0x59,0x09,0x06,0x00,
    0x3e,0x41,0x5d,0x55,0x2e,0x00,
    0x60,0x1c,0x13,0x1c,0x60,0x00,
    0x7f,0x49,0x49,0x49,0x36,0x00,
    0x1c,0x22,0x41,0x41,0x22,0x00,
    0x7f,0x41,0x41,0x22,0x1c,0x00,
    0x7f,0x49,0x49,0x49,0x41,0x00,
    0x7f,0x09,0x09,0x01,0x01,0x00,
    0x1c,0x22,0x41,0x49,0x3a,0x00,
    0x7f,0x08,0x08,0x08,0x7f,0x00,
    0x00,0x41,0x7f,0x41,0x00,0x00,
    0x20,0x40,0x40,0x40,0x3f,0x00,
    0x7f,0x08,0x14,0x22,0x41,0x00,
    0x7f,0x40,0x40,0x40,0x40,0x00,
    0x7f,0x04,0x18,0x04,0x7f,0x00,
    0x7f,0x04,0x08,0x10,0x7f,0x00,
    0x3e,0x41,0x41,0x41,0x3e,0x00,
    0x7f,0x09,0x09,0x09,0x06,0x00,
    0x3e,0x41,0x51,0x21,0x5e,0x00,
    0x7f,0x09,0x19,0x29,0x46,0x00,
    0x26,0x49,0x49,0x49,0x32,0x00,
    0x01,0x01,0x7f,0x01,0x01,0x00,
    0x3f,0x40,0x40,0x40,0x3f,0x00,
    0x03,0x1c,0x60,0x1c,0x03,0x00,
    0x0f,0x70,0x0f,0x70,0x0f,0x00,
    0x41,0x36,0x08,0x36,0x41,0x00,
    0x01,0x06,0x78,0x06,0x01,0x00,
    0x61,0x51,0x49,0x45,0x00,0x00,
    0x00,0x00,0x7f,0x41,0x41,0x00,
    0x01,0x06,0x08,0x30,0x40,0x00,
    0x41,0x41,0x7f,0x00,0x00,0x00,
    0x00,0x02,0x01,0x02,0x00,0x00,
    0x40,0x40,0x40,0x40,0x40,0x00,
    0x00,0x00,0x00,0x36,0x49,0x00,
    0x20,0x54,0x54,0x78,0x00,0x00,
    0x7f,0x44,0x44,0x38,0x00,0x00,
    0x38,0x44,0x44,0x28,0x00,0x00,
    0x38,0x44,0x44,0x7f,0x00,0x00,
    0x38,0x54,0x54,0x18,0x00,0x00,
    0x04,0x7e,0x05,0x01,0x00,0x00,
    0x08,0x54,0x54,0x3c,0x00,0x00,
    0x7f,0x04,0x04,0x78,0x00,0x00,
    0x00,0x00,0x7d,0x00,0x00,0x00,
    0x00,0x40,0x40,0x3d,0x00,0x00,
    0x7f,0x10,0x28,0x44,0x00,0x00,
    0x00,0x01,0x7f,0x00,0x00,0x00,
    0x7c,0x04,0x7c,0x04,0x78,0x00,
    0x7c,0x04,0x04,0x78,0x00,0x00,
    0x38,0x44,0x44,0x38,0x00,0x00,
    0x7c,0x14,0x14,0x08,0x00,0x00,
    0x08,0x14,0x14,0x7c,0x00,0x00,
    0x7c,0x08,0x04,0x04,0x00,0x00,
    0x48,0x54,0x54,0x24,0x00,0x00,
    0x04,0x3e,0x44,0x44,0x00,0x00,
    0x3c,0x40,0x40,0x7c,0x00,0x00,
    0x3c,0x40,0x20,0x1c,0x00,0x00,
    0x1c,0x60,0x1c,0x60,0x1c,0x00,
    0x6c,0x10,0x10,0x6c,0x00,0x00,
    0x4c,0x50,0x20,0x1c,0x00,0x00,
    0x44,0x64,0x54,0x4c,0x00,0x00,
    0x00,0x00,0x00,0x36,0x49,0x00,
    0x00,0x00,0x7f,0x00,0x00,0x00,
    0x49,0x36,0x00,0x00,0x00,0x00,
    0x01,0x01,0x01,0x01,0x01,0x00,
};

#endif
